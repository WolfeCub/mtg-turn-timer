import{c as b,p as T,a as P,f as h,j as w,R as x,r as g,X as v,C as N,b as R,d as S}from"./vendor.d6479924.js";const C=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}};C();const D={totalTime:10,players:[],playerTurn:""},d=b(T(P(D,(t,n)=>({actions:{tickDown:()=>{const a=h(n().players,l=>{l.forEach(e=>{if(!e.lastUpdate)return;const s=Date.now();e.timeRemaining-=(s-e.lastUpdate)/1e3,e.lastUpdate=s,e.timeRemaining<=0&&(e.lastUpdate=null,e.timeRemaining=0)})});t({players:a})},changeTurn:a=>{const l=h(n().players,e=>{const s=e.find(c=>c.name===n().playerTurn);s&&(s.lastUpdate=null);const i=e.find(c=>c.name===a);i&&(i.lastUpdate=Date.now())});t({players:l,playerTurn:a})},setInitialTime:a=>t({totalTime:a}),addPlayer:a=>t({players:[...n().players,{name:a,timeRemaining:n().totalTime,lastUpdate:null}]}),setPlayers:a=>t({players:a}),resetTime:()=>{const a=h(n().players,l=>{l.forEach(e=>{e.timeRemaining=n().totalTime,e.lastUpdate=null})});t({players:a,playerTurn:""})},stopTime:()=>{const a=h(n().players,l=>{l.forEach(e=>{e.lastUpdate=null})});t({players:a,playerTurn:""})}}})),{name:"persistant-storage",partialize:t=>Object.fromEntries(Object.entries(t).filter(([n])=>n!="actions"))})),o=w.exports.jsx,m=w.exports.jsxs,I=w.exports.Fragment,j=(t,n)=>t<=0?"bg-red-600":t<=.1*n?"bg-yellow-300":"bg-green-400",E=({player:t})=>{const n=d(r=>r.actions),a=d(r=>r.totalTime),l=d(r=>r.playerTurn);let e=j(t.timeRemaining,a);const s=Math.floor(t.timeRemaining/60),i=s>0?`${s}m `:"",c=t.timeRemaining%60,u=`${i}${c.toFixed(1)}s`,p=()=>{t.name===l?n.stopTime():n.changeTurn(t.name)};return m("div",{className:`w-full lg:w-64 grow rounded flex flex-col justify-center items-center ${e}`,onPointerDown:p,children:[o("div",{className:"text-5xl font-bold",children:t.name}),o("div",{className:"text-4xl font-bold",children:u})]})},M=({children:t,showModal:n})=>{if(!n)return null;const a=document.getElementById("portal");return x.createPortal(t,a)},U=()=>{const t=d(r=>r.actions),n=d(r=>r.players),a=d(r=>r.totalTime),[l,e]=g.exports.useState(""),s=(r,f)=>t.setPlayers(h(n,y=>{y[f].name=r})),i=r=>t.setPlayers(n.filter((f,y)=>y!==r)),c=()=>{t.addPlayer(l),e("")},u="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",p="flex flex-row items-center space-x-2 pb-2";return m("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-9/12 shadow-md rounded px-8 pt-6 pb-8 mb-4 bg-white",children:[o("h1",{className:"text-2xl font-bold pb-2 text-underline",children:"Setup"}),m("div",{className:p,children:[o("div",{children:"Time"}),o("input",{className:u+" w-2/12",value:a,type:"number",onChange:r=>t.setInitialTime(parseInt(r.target.value,10))})]}),o("h1",{className:"text-lg pb-2",children:"Names"}),n.map((r,f)=>m("div",{className:p,children:[o("input",{className:u,value:r.name,onChange:y=>s(y.target.value,f)}),o(v,{className:"h-5 w-5",onPointerDown:()=>i(f)})]})),m("div",{className:p,children:[o("input",{className:u,value:l,onChange:r=>e(r.target.value),onKeyDown:r=>{r.key==="Enter"&&c()}}),o(N,{className:"h-5 w-5",onPointerDown:c})]}),o("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onPointerDown:t.resetTime,children:"Reset Time"})]})},O=()=>{const t=d(e=>e.actions),n=d(e=>e.players),[a,l]=g.exports.useState(!1);return g.exports.useEffect(()=>{const e=setInterval(()=>{t.tickDown()},250);return()=>clearInterval(e)},[]),Math.ceil(n.length/2),m(I,{children:[o(M,{showModal:a,children:o(U,{})}),o("div",{className:"absolute h-10 w-10 bottom-2 right-2",children:o(R,{onPointerDown:()=>l(!a)})}),n.length===0?o("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:o("h1",{className:"text-5xl font-bold",children:"MTG Turn Timer"})}):o("div",{className:"h-screen flex flex-col lg:flex-row flex-wrap gap-2 p-2",children:n.map(e=>o(E,{player:e}))})]})};x.render(o(S.StrictMode,{children:o(O,{})}),document.getElementById("root"));
